# 15-Leafresh-CL
# â˜ï¸ Cloud Repository
**Leafreshì˜ í´ë¼ìš°ë“œ ìš´ì˜íŒ€ ë ˆí¬ì§€í† ë¦¬ì…ë‹ˆë‹¤. í™˜ì˜í•©ë‹ˆë‹¤!**
- **AWS, GCP í¼ë¸”ë¦­ í´ë¼ìš°ë“œ**ë¥¼ ì´ìš©í•´ ìš´ì˜í•˜ê³  ìˆìœ¼ë©°,
- **ìˆ˜ë™ ë°°í¬ ë°©ì‹**ê³¼ **Githubë¥¼ ì´ìš©í•œ CI/CD**, **Terraformì˜ IaC ë°©ì‹**ì„ ë²„ì „ë³„ë¡œ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤!

> í”„ë¡œì íŠ¸ ìƒí™©ì— ë”°ë¼ ë””ë ‰í† ë¦¬ êµ¬ì¡° ë“± ë‚´ìš©ì´ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


<br>

---

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
(project root directory)
â”œâ”€â”€ performance-test
â”‚Â Â  â”œâ”€â”€ v1-bigbang
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ load_k6.js
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ result.json
â”‚Â Â  â”‚Â Â  â””â”€â”€ result_stress.json
â”‚Â Â  â”œâ”€â”€ v2-docker
â”‚Â Â  â”‚Â Â  â””â”€â”€ init
â”‚Â Â  â””â”€â”€ v3-k8s
â”‚Â Â      â””â”€â”€ init
â”œâ”€â”€ README.md
â”œâ”€â”€ scripts
â”‚Â Â  â”œâ”€â”€ v1-bigbang
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ discord_notify.sh
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ kill_process.sh
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ restart_servers.sh
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ sftp_uploads.sh
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ show_log.sh
â”‚Â Â  â”‚Â Â  â””â”€â”€ start_servers.sh
â”‚Â Â  â””â”€â”€ v2-docker
â”‚Â Â      â”œâ”€â”€ ai-ci.yml
â”‚Â Â      â”œâ”€â”€ be-ci.yml
â”‚Â Â      â””â”€â”€ fe-ci.yml
â””â”€â”€ terraform
    â”œâ”€â”€ v2-docker
    â”‚Â Â  â””â”€â”€ init
    â””â”€â”€ v3-k8s
        â””â”€â”€ init

```

### ë²„ì „ êµ¬ë¶„ ë°©ë²•
- ë²„ì „ì€ **ë””ë ‰í† ë¦¬**ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤.
- **v1**: **sftp**ë¥¼ ì´ìš©í•œ ìˆ˜ë™ ë°°í¬
- **v2**: **Docker**ì™€ Github Actionì„ ì´ìš©í•œ **CI/CD** ë°°í¬
- **v3**: IaC ë°©ì‹ì˜ **Terraform** ë°°í¬

<br>

---

## ğŸ‘¥ ì‘ì—…ì ì •ë³´

| ì´ë¦„     | ë‹‰ë„¤ì„        | ì‚¬ì§„ |
|:----------|:----------------|:------|
| **ë‹‰ë„¤ì„** | `@jchanho99`   | `@pieceofizzy` |
| **ì‚¬ì§„** | <img src="https://github.com/jchanho99.png" width="100" height="100"/> | <img src="https://github.com/pieceofizzy.png" width="100" height="100"/> |

<br>
---

## ğŸ›  ì‚¬ìš© ìŠ¤íƒ

- **Google Cloud Platform (GCP)**
- **Amazon Web Services (AWS)**
- **Terraform**

<br>

---

## ğŸ› ï¸ ì½”ë“œ ì‘ì„± ê·œì¹™ 
- **Terraform** ê³µì‹ í¬ë§·í„°ì¸ `terraform fmt`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ìŠ¤íƒ€ì¼ì„ í†µì¼í•©ë‹ˆë‹¤.
- 

### ë„¤ì´ë° ë°©ì‹
- ë“¤ì—¬ì“°ê¸°ëŠ” **2 spaces**ë¡œ í†µì¼í•œë‹¤. 
- ë„¤ì´ë°ì€ ëª¨ë‘ **foo-bar** í˜•ì‹ì„ ì‚¬ìš©í•œë‹¤.
- ëª¨ë“  ë¦¬ì†ŒìŠ¤ì—ëŠ” **tag**ë¥¼  í•„ìˆ˜ ì‘ì„±í•œë‹¤.

### íƒœê·¸ ì§€ì • ë°©ì‹
```hcl
tags = {
  Name        = "leafresh-vpc"
  Project     = "leafresh"
  Environment = "prod"        # dev, prod ë“±ìœ¼ë¡œ êµ¬ë¶„
  Module      = "network"    # ëª¨ë“ˆëª… (network, compute, database, security, monitoring ë“±)
  Version     = "v2"         # Terraform ì½”ë“œ ë²„ì „
  Assignee    = "andrea"      # ì‘ì„±ì ì´ë¦„
}
```

<br>

---


## ğŸ“– í˜‘ì—… ë°©ì‹
- ë³€ê²½ì‚¬í•­ ë°œìƒ ì‹œ, **PR ì‘ì„± ë° ë¦¬ë·°**ë¥¼ ì§„í–‰í•œë‹¤.
- main ë¸Œëœì¹˜ ë³‘í•© ì „, **`terraform validate`** ë° **`terraform plan`**ë¥¼ ìˆ˜í–‰í•˜ì—¬ ë°°í¬ ì „ ë¬¸ì œ ë°œìƒ í™•ë¥ ì„ ë‚®ì¶˜ë‹¤.
- ëª¨ë“ˆ ì¶”ê°€/ìˆ˜ì • ì‹œ, **`README.md`** ë° ì˜ˆì‹œ ì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.


### Terraform Plan & Apply ì›Œí¬í”Œë¡œìš° 
1. ìµœì‹  ì½”ë“œ Pull
`git pull origin main`

2. ì½”ë“œ ìˆ˜ì • & í¬ë§· ì •ë¦¬
`terraform fmt`

3. ë¬¸ë²• ì²´í¬
`terraform validate`

4. ë³€ê²½ì‚¬í•­ í™•ì¸
`terraform plan`

5. PR ìƒì„± ë° Plan ê²°ê³¼ ì²¨ë¶€

6. ë¦¬ë·° ì™„ë£Œ í›„ Merge

7. ì‹¤ì œ ì ìš©
`terraform apply`


### PR ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸

| ì²´í¬ í•­ëª© | ì„¤ëª… |
|:----------|:-----|
| terraform fmt ì ìš© ì—¬ë¶€ | ì½”ë“œ í¬ë§·íŒ… ì ìš© í™•ì¸ |
| ë¦¬ì†ŒìŠ¤ íƒœê·¸ ì‚½ì… ì—¬ë¶€ | ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— íƒœê·¸ ì‚½ì… ì—¬ë¶€ í™•ì¸ |
| ë²„ì „ ëª…ì‹œ ì—¬ë¶€ | versions.tf íŒŒì¼ ì ì ˆíˆ ê´€ë¦¬ ì—¬ë¶€ í™•ì¸ |
| ë¯¼ê° ì •ë³´ ë…¸ì¶œ ì—¬ë¶€ | Secrets ì§ì ‘ ë…¸ì¶œ ë°©ì§€ ì—¬ë¶€ í™•ì¸ |
| ê°€ë…ì„± ë° ì¼ê´€ì„± | ë“¤ì—¬ì“°ê¸°, ì •ë ¬, ë¹ˆì¤„ í™•ì¸ |
| ë¦¬ì†ŒìŠ¤ ë„¤ì´ë° ê·œì¹™ ì¤€ìˆ˜ | 2ë‹¨ì–´ ì´ìƒ ì‚¬ìš© ì‹œ '-'ë¡œ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸ |
| ëª¨ë“ˆ ì‚¬ìš© ì—¬ë¶€ | ë¦¬ì†ŒìŠ¤ë¥¼ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šê³  moduleë¡œ ê°ìŒŒëŠ”ì§€ |
| outputs.tf ì‘ì„± ì—¬ë¶€ | ì£¼ìš” ì¶œë ¥ ê°’(outputs)ì„ ì •ì˜í–ˆëŠ”ì§€ |
| terraform plan ê²°ê³¼ ê²€í†  | ì˜ë„ì¹˜ ì•Šì€ ë¦¬ì†ŒìŠ¤ ì‚­ì œ/ë³€ê²½ ì—†ëŠ”ì§€ í™•ì¸ |
